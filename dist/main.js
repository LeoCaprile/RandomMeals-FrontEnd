(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{U:()=>g});function t(){fetch("https://www.themealdb.com/api/json/v1/1/random.php",{method:"GET"}).then((function(e){return e.json()})).then((function(e){var n,o=document.getElementById("app_main"),i=e.meals[0].strMealThumb,a=e.meals[0].strMeal,r=e.meals[0].idMeal;o.innerHTML=(n=i,'\n\t<div id="title--food" class="title has-text-centered">'.concat(a,'</div>\n        \n\t<div class="is-flex is-justify-content-center">\n\t\t<div id="like__container" class="like--container is-flex is-align-self-center">\n\t\t\t<div id="like" class="like heart_hover fas fa-heart fa-7x"></div>\n\t\t\t<div class="dislike heart_hover fas fa-heart-broken fa-7x"></div>\n\t</div>\n\t\t\n\t<div id="food-thumbnail">\n\t\t   <img class="img-app" src="').concat(n,'">\n\t</div>\n\n\t</div>')),function(e){var n=document.querySelector(".like"),o=document.querySelector(".dislike"),i=document.getElementById("like__container");function a(e){setTimeout((function(){e.classList.add("heart_hover"),e.classList.remove("animation__zoomscreen"),t(),i.classList.remove("no-cursor-event")}),300)}function r(e){e.classList.remove("heart_hover"),e.classList.add("animation__zoomscreen"),i.classList.add("no-cursor-event")}n.addEventListener("click",(function(){var t;t=e,fetch("https://api-randonmeals.herokuapp.com/auth/addLike",{method:"PUT",headers:{"Content-Type":"application/json",authorization:localStorage.getItem("token")},body:JSON.stringify({MealID:t})}),r(n),a(n)})),o.addEventListener("click",(function(){r(o),a(o)}))}(r)}))}var n=function(){g("app_container","app_render"),t()},o=function(){localStorage.getItem("token")?(h(),n()):r()},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1500,n=document.getElementById(e);n.classList.remove("is-hidden"),setTimeout((function(){n.classList.add("is-hidden")}),t)},a=function(){g("app_container","log_render"),document.getElementById("iniciarsesion").onsubmit=function(e){e.preventDefault();var t=document.getElementById("email").value;if(!t.includes("@")||!t.includes("."))return i("emailwarning");var n=document.getElementById("password").value;if(n<=0)return i("passwarning");fetch("https://api-randonmeals.herokuapp.com/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.success||"email or pass"!==e.type?e.success||"pass"!==e.type?(localStorage.setItem("token",e.token),o()):i("notification-box-error-2",2500):i("notification-box-error-1",2500)}))}},r=function(){g("app_container","home_render"),document.getElementById("home_button").addEventListener("click",(function(){var e=JSON.stringify(localStorage.getItem("token"));console.log(e),a()}))};function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,i,a=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){s=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function d(e){for(var t={},n=[],o=[],i=0,a=Object.entries(e);i<a.length;i++){var r=s(a[i],2),c=r[0],l=r[1];c.includes("strIngredient")&&""!==l&&null!==l&&n.push(l),c.includes("strMeasure")&&""!==l&&null!==l&&o.push(l)}for(var d in n)t[n[d]]=o[d];return t}function u(e,t){for(var n=0,o=Object.entries(e);n<o.length;n++){var i=s(o[n],2),a=i[0],r=i[1],c=document.createElement("li");c.innerText="".concat(a," ").concat(" "==r?"":"- "+r),t.append(c)}}var m=document.getElementById("login-navbar"),f=document.getElementById("signup-navbar"),v=function(){var e=document.getElementById("user-navbar"),t=document.getElementById("logout-navbar");e.addEventListener("click",(function(e){e.preventDefault(),g("app_container","userHistory_render"),fetch("https://api-randonmeals.herokuapp.com/auth/getLikes",{method:"GET",headers:{"Content-Type":"application/json",authorization:localStorage.getItem("token")}}).then((function(e){return e.json()})).then((function(e){return function(e){var t,n=document.querySelector(".history-container"),o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){s=!0,a=e},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;fetch("https://www.themealdb.com/api/json/v1/1/lookup.php?i=".concat(i),{method:"GET"}).then((function(e){return e.json()})).then((function(e){var t,o,i,a,r=e.meals[0].strMealThumb,s=e.meals[0].strMeal,c=e.meals[0].strYoutube,l=e.meals[0].idMeal,m=e.meals[0],f=e.meals[0].strInstructions,v=d(m),h=document.createElement("div");h.setAttribute("class","food-box"),h.setAttribute("data-id",l),h.addEventListener("click",(function(e){var t;"btn_delete"==e.target.id&&(t=h.getAttribute("data-id"),fetch("https://api-randonmeals.herokuapp.com/auth/removeLike",{method:"PUT",headers:{"Content-Type":"application/json",authorization:localStorage.getItem("token")},body:JSON.stringify({mealID:t})}),h.classList.remove("hover__item"),h.classList.add("notification-out"),setTimeout((function(){h.remove()}),500)),e.target.id})),h.innerHTML=(t=r,i=c,a=f,'\n      \n\t<div class="columns is-align-items-center box hover__item mt-3 mb-3">\n\t<div class="btn-delete delete is-large is-hidden-desktop"></div>\n\t<div class="column has-text-centered-mobile is-size-3-desktop is-hidden-desktop has-text-weight-bold">'.concat(o=s,'</div>\n\n\t\t\t<div class="has-text-centered-mobile column is-2">\n\t\t\t\t<img src="').concat(t,'" width="100">\n\t\t\t</div>\n\t\t\t<div class="column has-text-centered-mobile is-size-3-desktop is-hidden-mobile has-text-weight-bold">').concat(o,'</div>\n\t\t\t<div class="is-flex is-flex-direction-column">\n\t\t\t\t<a target="__blank" href="').concat(i,'" class="button has-text-weight-bold">View Youtube Tutorial</a>\n\t\t\t\t<a  class="button view_recipe has-text-weight-bold">View Recipe</a>\n\t\t\t</div>\n\t\t<div id="btn_delete" class="btn-delete delete is-large is-hidden-mobile"></div>\n</div>\n\n<div class="modal">\n                    <div class="modal-background"></div>\n                    <div class="modal-card">\n                      <header class="modal-card-head">\n                        <p class="modal-card-title">').concat(o,'</p>\n                        <button class="delete is-large close_modal_button" aria-label="close"></button>\n                      </header>\n                      <section class="modal-card-body is-flex is-flex-direction-column">\n                        <img class="modal-image" src="').concat(t,'" width="200">\n                        <h1 class="title ml-2">Ingredients</h1>\n                        <ul class="modal__ingredients">\n                            \n                        </ul>\n                        <h1 class="title ml-2 mt-4">Instructions</h1>\n                        <p>\n\t\t\t\t\t\t').concat(a,'\n\t\t\t\t\t\t</p>\n\n                      </section>\n                      <footer class="modal-card-foot">\n                        <a href="').concat(i,'" class="button is-success">View on youtube</a>\n                      </footer>\n            </div>\n     </div>\n     '));var p=h.querySelector(".modal__ingredients"),g=h.querySelector(".close_modal_button"),b=h.querySelector(".modal");h.querySelector(".view_recipe").addEventListener("click",(function(){b.classList.add("is-active")})),g.addEventListener("click",(function(){b.classList.remove("is-active")})),u(v,p),n.append(h)}))}}catch(e){o.e(e)}finally{o.f()}}(e)}))})),t.addEventListener("click",(function(){var e,t;localStorage.removeItem("token"),e=document.getElementById("nav-buttons"),t=document.getElementById("web-title"),e.innerHTML='\n    <a id="login-navbar" class="button is-info" href="">Login</a>\n    <a id="signup-navbar" class="button is-info ml-3 mr-3" href="">Sign up</a>\n    ',t.removeEventListener("click",n),r()}))},h=function(){var e=document.getElementById("web-title");document.getElementById("nav-buttons").innerHTML='<a id="user-navbar" class="button is-info" href="">My account</a>\n    <a id="logout-navbar" class="button is-info ml-3 mr-3" href="">Log out</a>',e.addEventListener("click",n),v()};m.addEventListener("click",(function(e){e.preventDefault(),a()})),f.addEventListener("click",(function(e){e.preventDefault(),g("app_container","signup_render"),document.getElementById("signup").onsubmit=function(e){e.preventDefault();var t=document.getElementById("email").value;if(!t.includes("@")||!t.includes("."))return i("emailwarning");var n=document.getElementById("password").value;if(n<=0)return i("passwarning");fetch("https://api-randonmeals.herokuapp.com/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})}).then((function(e){return e.json()})).then((function(e){e.error?i("notification-box-error",2500):i("notification-box-success",2500)}))}}));var p=document.getElementById("app_container").innerHTML,g=function(e,t){document.getElementById(e).innerHTML=p;var n=document.getElementById(t);document.getElementById(e).innerHTML=n.innerHTML};o()})();